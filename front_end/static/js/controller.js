// Generated by CoffeeScript 1.6.2
(function() {
  angular.module('episodeGet.controllers', []).controller('HomePageCtrl', function($scope, $http) {
    $http.defaults.headers.post['X-CSRFToken'] = $.cookie('csrftoken');
    $('.home-hero').height($(window).height() - 4);
    $(window).resize(function() {
      return $('.home-hero').height($(window).height() - 4);
    });
    $('.btn-reg-top').click(function() {
      return $.scrollTo('.login-screen', 1000);
    });
    $('.hero-help').click(function() {
      return $.scrollTo('.feature-intro-word', 800);
    });
    return $('.feature-item').mouseenter(function() {
      return $(this).stop().addClass('animated swing');
    });
  }).controller('UserCtrl', function($scope, $http) {
    $http.defaults.headers.post['X-CSRFToken'] = $.cookie('csrftoken');
    return $scope.user = {
      id: 0,
      last_login: "",
      username: "游客",
      email: ""
    };
  }).controller('NavCtrl', function($scope, $http) {
    $scope.login = {
      show: false,
      login_id: 'top',
      logined: false,
      showLogin: function() {
        return this.show = !this.show;
      },
      isShownLogin: function() {
        return this.show;
      }
    };
    $scope.checkLogin = function() {
      return $http({
        method: 'GET',
        url: '/accounts/current/'
      }).success(function(data, status, headers, config) {
        $scope.user = data;
        return $scope.login.logined = data.id === !0;
      }).error(function(data) {
        $scope.user = {
          id: 0,
          last_login: "",
          username: "游客",
          email: ""
        };
        return $scope.login.logined = false;
      });
    };
    return $scope.checkLogin();
  });

}).call(this);
